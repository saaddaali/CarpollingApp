<div class="app-container">
    <!-- Left sidebar with conversations list -->
    <div class="conversations-sidebar">
        <button class="back-button" href="javascript:history.back()">
            <i class="pi pi-arrow-left"></i>
            <span>Retour</span>
        </button>

        <div class="sidebar-header">
            <h2>Messages</h2>
            <div class="search-box">
                <input type="text" placeholder="Search conversations...">
                <i class="pi pi-search"></i>
            </div>
        </div>

        <div class="conversations-list">
            <div class="conversation-item" *ngFor="let conversation of items"
                 (click)="selectConversation(conversation)">
                <img class="conversation-avatar"
                     [src]="conversation.driver.photo"
                     alt="Profile">
                <div class="conversation-info">
                    <div class="conversation-name">
                        {{ conversation.driver.username }}
                    </div>
                    <div class="conversation-name">
                        {{ conversation.libelle }}
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Main chat area -->
    <div class="chat-container">
        <passenger-topbar></passenger-topbar>

        <div class="chat-header">
            <div class="header-profile">
                <img class="header-profile-image"
                     src="assets/demo/images/avatar/ivanmagalhaes.png"
                     alt="Profile">
                <div class="header-profile-info">
                    <span class="header-profile-name">Driver</span>
                    <span class="header-profile-status">Online</span>
                </div>
            </div>

            <div class="header-actions">
                <button class="action-btn">
                    <i class="pi pi-phone"></i>
                </button>
                <button class="action-btn">
                    <i class="pi pi-video"></i>
                </button>
                <button class="action-btn">
                    <i class="pi pi-ellipsis-v"></i>
                </button>
            </div>
        </div>

        <!-- Date separator -->
        <div *ngIf="true" class="date-separator">
            {{ currentDate | date: 'MMMM d, yyyy' }}
        </div>

        <div class="chat-messages ">
            <div class="message" *ngFor="let message of messages"
                 [ngClass]="{'from-user': message.isPassenger,'from-bot': !message.isPassenger }">
                <div class="message-text">{{ message.contenu }}</div>
                <div class="message-time">{{ message.dateEnvoi | date:'HH:mm' }}</div>
            </div>
        </div>

        <div class="chat-input">
            <input type="text"
                   placeholder="Type your message..."
                     [(ngModel)]="messageInput"
            />
            <button class="send-btn" (click)="save()">
                <i class="pi pi-send"></i>
            </button>
        </div>
    </div>
</div>

<app-message-view-passenger></app-message-view-passenger>
